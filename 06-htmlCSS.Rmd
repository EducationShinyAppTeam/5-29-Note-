# HTML and CSS {#htmlCSS}

## Styling Text {#textStyle}

The styling of text (including font size, font weight (i.e., boldface), font family, color, etc.) is something that we began standardizing in Fall 2019. This is centrally managed by Neil and Bob to ensure 1) consistency across apps, 2) to cut down on the extraneous coding you need to do (this way you can focus on the apps), and 3) ensures that our apps are accessible and mobile friendly. To this end:

The styling of text will be controlled using an __external__ CSS (Cascading Style Sheet) file. You will implement this depending on what approach you use:

+ If you're using the `boastApp` function from `boastUtils` (__recommended for all new apps__), you don't need to do anything as the appropriate calls will automatically be done for you.
+ If you are using the `ui.R` and `server.R` format (i.e., apps from prior years), place the following code in the `tags$head( )` portion at the top of the `dashboardBody` section of the `ui.R` file :
<!-- end list -->
``` {r cssCall1, echo = TRUE, eval = FALSE}
dashboardPage(
  skin = "blue",
  dashboardHeader(
    title = "title",
    titleWidth = 300,
    # [omitted code]
  ),
  # [omitted code],
  dashboardBody(
    tags$head(
      tags$link(rel = "stylesheet", type = "text/css",
        href = "https://educationshinyappteam.github.io/Style_Guide/theme/boast.css"),
      tabItems(
       # [omitted code]
      )  )  )  )
```

There times when you might need some additional text styling that is not already defined. In these cases, __you'll need to talk to Neil or Bob to determine what is the best course of action__. This could entail an addition to the central CSS file or the inclusion of an additional CSS file unique to your App. 

The central CSS file should only be altered by Neil or Bob and covers many aspects. However, this is a living file meaning that we will add to/alter the file as needed to improve the whole set of BOAST apps.

See also [Section \@ref(css)](#css).

## HTML {#html}

Our Shiny apps live on the internet and are thus going to be wrapped in HTML even though we are writing them in `R`. When you run a Shiny app, `R` and the `shiny` packages actually convert all of the `R` code into an HTML document which is served up to the user. While you will not have to directly write HTML for your apps, you should become aware of HTML tags that you will need to deal with when coding/writing your App. Further, you need to learn how to use these tags correctly as failure to do so becomes an __Accessibility Issue__.

HTML Tags should not be used without some basic understanding of what that tag is for. Using the tags without such an understanding can not only lead to problems with your code running properly or looking like what you intended, but can interfere with how accessible your app is to a wider audience. Here are the most common HTML tags that you'll encounter when making a Shiny App.

### Lists

There are two aspects to lists: the items in the list and the environment those items live in. 

The two list environments are Ordered Lists and Unordered Lists.

+ The Ordered List environment is for when you require that a user works through the items in a particular order. You call this environment in your App by using `tags$ol( [your list] )`. These lists are sequentially numbered/lettered.
+ The Unordered List environment is for when you want to give the user a list where they can jump around between the items however they wish. You call this environment in your App by using `tags$ul( [your list] )`. These lists will appear with bullets.

Once you've created the list environment, you create items for your list in the same way: `tags$li([content])`. You do not need to and should __NOT__ use any header or paragraph tags with your list items; our Style Sheet will take care of the formatting. You can use emphasis/italics or strong/boldface on portions of the content as appropriate.

Here is an example of how you might create a list:
```{r listExample1, echo=TRUE, eval=FALSE}
tags$ul(
  tags$li("This is my first item."),
  tags$li("A second item with a", tags$strong("boldface"), "word.")
)
```
which turns into

+ This is my first item.
+ A second item with a __boldface__ word.

There is one exception to the environment that you need to be aware of: the Dashboard Header has a built-in listing environment and thus you will jump straight to `tags$li()` when in that section.

### Headers {#headers}

Heading tags provide a navigational structure to your app. Think of them as being the different levels of titles in a book. In fact, if you look at the Table of Contents to the left (provided you haven't hidden it), everything you see there is actually tied to a Header in this document.

No matter how much new coders want, Heading Tags are __NOT__ for making text larger, boldface, or other text styling. Think about the headings as laying out a Table of Contents for your app, rather than containing content. Just like the Table of Contents for this Style Guide.

There is a specific ordering to the Header tags that is critical to ensure your App is accessible by screen readers.

1. `h1()` is for the Title of your App and should be ONCE at the top of the first page that appears when you load the app (i.e., the Overview).
2. `h2()` is for Tab/Page titles within the App. These would correspond with the tab links you place in the dashboard's left side panel.
3. `h3()` is for titling Sections within a Tab/Page of the App. These might title the portion of the page that is for a game board, questions, answers, and graphs/plots.
4. `h4()` is for a Subsection within a section. You might use this to distinguish different sets of controls in a Controls section.
5. `h5()` and `h6()` should be used sparingly. These might be used for different levels of a game. When you call these in your App, you just call them as listed here; i.e., `h1()`, `h2()`, etc.

__Avoid skipping heading levels__ as this will get your App flagged for an Accessibility Violation. That is to say don't start at `h2` with no `h1` and don't go from `h1` to `h3` without an `h2`. Again, think of these as the layers of your table of contents or the outline of a paper; you wouldn't skip whole sections in either of those.

Here are few more things to NOT do with the heading tags:

+ DO NOT USE headings to style text (We cannot stress this enough.)
+ Do not wrap a header tag around a list element (e.g., `h3(tags$li("here is my list item"))`) nor the reverse (e.g., `tags$li(h3("here is my list item"))`)
+ Do not mix header tags together in the same line or with the paragraph tag (e.g., `h2("Introduction to", p("my game")))

For more information check out

+ [W3C's Tutorial](https://www.w3.org/WAI/tutorials/page-structure/headings/)
+ [Penn State's Headings and Subheadings Accessibility](https://accessibility.psu.edu/headings/)

### Paragraphs {#paragraphs}

Your content should be enclosed in the paragraph tag, `p()`. Even if your content is relatively brief or a mathematical expression, the paragraph tag will ensure that the content is sized correctly and readable. This tag tells screen readers and browsers what your content actually is. 

## CSS {#css}

Cascading Style Sheets (CSS) will be the way to control the visual appearance of all elements of the app. To ensure that we have consistent we will make use of the BOAST CSS throughout. This is relatively new (Winter 2019/Spring 2020), so many of the older apps will need to have this added to their code. This allows us to centralize and dynamically update all apps at once.

There are a few key elements at play for CSS:  

1. All apps need to have the appropriate reference to the CSS file (See [Section \@ref(textStyle)](#textStyle)).  
    a. Please register any issues, bugs, enhancements, new styling to the Style Guide repository of GitHub. 
2. Any App specific styling needs to as be in a CSS file and approved.
3. There should not be any styling code in the `app.R`, `ui.R`, or `server.R` files (a.k.a. in-line CSS). Styling code would look like this:  
    + `tags$style(HTML(".js-irs-0 .irs-single, .js-irs-0 .irs-bar-edge, .js-irs-0 .irs-bar {background: orange}"))`  
    + `style="color: #fff; background-color: #337ab7; border-color: #2e6da4"`
4. For objects that need to have a particular styling invoked, we will make use of the `class` attribute. These will invoked through the HTML tags or through the function calls.  

```{r classTag1, echo=TRUE, eval=FALSE}
# HTML Tag Example 1
p(
  class = "hangingindent",
  "Attali, D. and Edwards, T. (2018). shinyalert: Easily create
  pretty popup messages (modals) in 'Shiny'. (v1.0). [R package].
  Available from https://CRAN.R-project.org/package=shinyalert"
)

# HTML Tag Example 2
div(class = "updated", "Last Update: 12/2/2019 by NJH.")

# Function Call Example
actionButton(
  inputId = paste0("grid-", row, "-", column),
  label = "?",
  color = "primary",
  style = "bordered",
  class = "grid-fill"
)
```

There is an exception to #3: setting up alignment for a div section. This would look like `div(style = "text-align: center"...)` This type of styling is allowed in the R files (generally in the UI portions only).

If you come across an app that has in-line CSS OR calls to a CSS file that isn't `boast.css`, please log an issue and mention/assign Neil. (Most common external CSS files are `style.css` and `Feature(s).css`.)
